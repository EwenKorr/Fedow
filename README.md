> [!WARNING]  
> Work in progress. ALPHA RELEASE.

# TiBillet/FEDOW : Federated and open wallet.

## Manifesto for a local, social and inclusive economy that belongs to us.

### Free and open-source engine for time and local currency.

Because a bank can be free software:
We don't need fancy blockchain, NFT, Dapp or any other techno-solutionist hype.

All we need is an engine for money creation, account management and transactions.
All this under federated and transparent management, to create networks of points of sale accepting local currencies,
time currencies or even currencies that are not currencies.

A simple tool for creating a tiny bank on the scale of a small or large area and supporting a local, social and
inclusive economy.

### Why ?

Chez Code Commun (la coopérative numérique qui développe l'écosystème TiBillet), nous pensons que le logiciel libre
couplé à des pratiques de gouvernance ouverte et transparente et une économie sociale et solidaire sont les conditions
d'une société appaisée que nous souhaitons voir emmerger.

Avec **Fedow**, qui s'inscrit dans l'écosystème **TiBillet**, nous souhaitons permettre à chacun de
créér ou rejoindre une fédéréation de monnaies **locale** ou **temps** et de participer à sa gouvernance.

Nous ne croyons pas aux solutions technologiques promises par le Web3 : Blockchains énergivores, création de valeur sur
du vide, bulles spéculatives, marchés d'échanges dérégulés, gourous milliardaires… Autant de promesses populistes
d'empuissantements non tenues au service d'une économie ultra-libérale de la rareté et de la spéculation.

Ceci dit, nous ne jetons pas le bébé avec l'eau du bain.

Nous pensons que les entreprises humaines, coopératives et locales peuvent (doivent ?) être soutenues par des outils
numériques libres pour construire des structures bancaires locales et coopératives au service d'une économie réelle.

Nous souhaitons construire **Fedow** dans ce sens : un outil numérique simple et compréhensible par chacun pour une
économie **réele, non spéculative, transparente.** En un mot : éthique

### Real économy and ethical blockchain

Imaginons un livre de compte tenu par tous les acteurs d'une coopérative.
Dans ce livre de compte, chaque acteur peut créer sa propre monnaie et peut (ou non) l'échanger à un taux fixe avec les
autres monnaies de la coopérative.

Une monnaie fédérée à l'ensemble des acteurs est créée, indexée sur l'euro pour que chaque monnaie puisse s'échanger et
servir à l'économie rééelle des biens et services.

D'autres type de monnaies non indéxée sur l'euro peuvent être créées : Monnaie temps pour s'échanger des service ou
valoriser le bénévolat, monnaie "cadeau" pour analyser les stocks offerts, monnaie "ticket resto" pour gérer des repas
collectifs, et même monnaie "libre" compatibles avec d'autres systèmes comme la June.

Couplés au reste des outils de TiBillet, il est alors possible de créer des points de ventes, des caisses
enregistreuses, des rapports de comptabilité légaux et des boutiques en ligne qui acceptent indifféramment les monnaies
locales et fédérées du réseau, comme des espèces ou cartes bancaires.

#### Financement et pérénisation du projet et lutte contre la spéculation.

Imaginons un mécanisme qui puisse à la fois :

- Inciter de nouveaux acteurs à rejoindre la fédération ou en créer une nouvelle.
- Financer le développement du projet libre et coopératif (Problématique récurrente dans le milieu des logiciels
  libres).
- Lutter contre la spéculation et l'accumulation des capitaux pour une économié réelle et non financiarisée.

Une idée a été retenue. Elle à le mérite de résoudre les trois problématiques soulevées et s'inspire fortement de
la [monnaie fondante](https://fr.wikipedia.org/wiki/Monnaie_fondante) imaginée
par [Silvio Gesell](https://fr.wikipedia.org/wiki/Silvio_Gesell).

#### Concepts :

- Tout le matériel nécéssaire est produit par la coopérative et distribuée à ses acteurs à prix coutant. (logiciel de
  points de vente, carte bancaire RFID, logiciel comptable, e-boutique, etc... voir [TiBillet](https://tibillet.org))
- Chaque utilisateur dispose d'un portefeuille numérique qui lui permet d'utiliser toutes les monnaies du réseau.
- Chaque lieu de point de vente est un **noeud** du réseau et est considéré comme un point de change.
- Les portefeuilles sont utilisables à vie et sans frais (fee, gaz, etc... ) pour les utilisateurs ni pour les **noeuds
  **.
- Un [demeurage](https://fr.wikipedia.org/wiki/Demeurage_(finance)) est appliqué sur les portefeuilles sous la condition
  suivante :
    - Si la monnaie n'est pas utilisée sous un certain délais, le portefeuille perd de sa valeur: **une partie est
      prélevée pour être réinjecté dans le réseau coopératif.**

#### Je suis un utilisateur lambda, en pratique ça donne quoi ?

- J'adhère et donne de mon temps dans une association de quartier qui utilise TiBillet/Fedow : Je reçois une carte de
  membre et l'association me crédite de la monnaie temps.
- Je peux dépenser cette monnaie temps pour réserver des heures d'utilisation d'un fablab ou d'un espace de travail
  partagé mis à disposition de l'association.
- Je scanne ma carte et je peux la recharger en ligne de 100€ : j'achète de la monnaie fédérée.
- Je souhaite reserver une place au festival organisé par une autre association qui utilise TiBillet/Fedow et j'achète
  le billet, des boissons et de la nourriture avec la même carte : Le festival bénéficie d'un système de cashless et
  reçoit
  de la monnaie fédérée.
- Le festival peut échanger cette monnaie fédérée contre des euros, ou s'en servir pour payer ses prestataires avec tout
  le bénéfice
  d'une [monnaie locale complémentaire et citoyenne "MLCC"](https://monnaie-locale-complementaire-citoyenne.net).
- Il me reste de la monnaie sur ma carte. Je peux la dépenser dans un autre lieu qui utilise TiBillet/Fedow ou la
  garder pour plus tard : Elle est valable à vie.
- Je l'oublie dans un tirroir : Je suis régulièrement rappellé à l'utiliser via les newsletters de la fédération qui
  font la promotion des évènements associatifs et coopératifs du réseau.
- Au bout d'un an, si je ne me sert toujours plus de ma carte, la fédération récupère une partie l'argent pour le
  réinjecter dans le développement du réseau.
- La coopérative se réunit régulièrement pour faire le point sur la circulation des monnaies et choisir les projets dans
  lesquels réinvestir l'argent récupéré.
- Proposition première : 1/3 pour le noeud (organisateur de festival, association...), 1/3 pour la maintenance et le
  développement de l'outil, 1/3 pour un fond commun de soutien aux projets associatifs et coopératifs.

### Project built, financed and tested with the support of :

Originally designed to create a cashless euro or time currency system (as used at festivals) for several venues, the
current repository is a separation of the source code originally integrated into the TiBillet cashless point of sale
project.

Current repository is a separation of the source code initially integrated into the TiBillet cashless point of sale
project (https://tibillet.org).

- Coopérative Code Commun (https://codecommun.coop)
- la Réunion des Tiers-lieux (https://www.communecter.org/costum/co/index/slug/LaReunionDesTiersLieux/#welcome)
- La Raffinerie (https://www.laraffinerie.re/)
- Communecter (https://www.communecter.org/)

## Install

```bash
cp env_example .env
# Edit .env 
docker compose up -d
```

## Development environment

```bash
git pull
poetry install --test # add test for pop database with test data
poetry run python manage.py migrate
poetry run python manage.py install
poetry run python manage.py runserver
```

## Test

```bash
poetry shell
coverage run --source='.' manage.py test
coverage report
# or 
coverage html
```

## Documentation

This project is a part of the TiBillet Cooperative tools.

https://tibillet.org

Fedow was designed from the outset to connect different TiBillet point-of-sale servers so that they could share the
cards of their respective users.

Stripe connect is currently the accepted payment endpoint.

Each TiBillet server connected to Fedow has a primary wallet and a Stripe Connect id.

When a cashless reload is validated by Fedow, the card is reloaded and the money is available on the primary Stripe
account.

When a purchase is made in one of the points of sale of any federated TiBillet server, a transfer from the primary
Stripe account to the Stripe connect account of the TiBillet server is carried out.

To do this, you need to create a federated main asset, then create an entry for each federated Tibillet server.

> [!WARNING]  
> The primary and federated monetary asset can only be created if you have access to the server.
> The same applies to each TiBillet server. We will call them "Places".
> There is no API for each of these actions.

> [!WARNING]
> Each key returned is private.
> Do not lose them and keep them in a safe place.
> They are hashed on the server side and can never be revealed again.

### Create a new asset

```bash
# Create new asset
# arg1 = Asset name
# arg2 = Asset code (len 3 max)
poetry run python manage.py create_asset Peaksu PKS
# return the private key.
```

### Connect a TiBillet server

```bash
# Create new place
poetry run python manage.py new_place "Manapany Festival"
# Copy the string and paste it to the TiBillet server administration.
```

### API documentation

To create new user wallet and perform transactions, see the OpenAPI documentation :
(work in progress... )

## Contact :

- https://discord.gg/ecb5jtP7vY
- https://chat.tiers-lieux.org/channel/TiBillet
- https://chat.communecter.org/channel/Tibillet

### Sources et inspirations

- https://web3isgoinggreat.com/
- https://fr.wikipedia.org/wiki/Monnaie_fondante
- https://fr.wikipedia.org/wiki/%C3%89conomie_libre
